function getGithubRepoUrl(e,t,n){return`https://github.com/CircleCI-Public/support-articles/edit/main/data/articles/html/${t}${("en-us"===e&&`-${n.match(/[a-z]|[A-Z]|\d|\s/g).join("")}`||"").split(" ").join("-")}_${e}.html`}function setEditBtnLink(){const e=$("#editBtn"),t=getGithubRepoUrl(e.attr("locale"),e.attr("article-id"),e.attr("article-title"));e.click(function () {ga('send', {hitType: 'event',eventCategory: 'trial',eventAction: 'click',eventLabel: 'Edit Support Article'});window.open(t, '_blank');})}function toTitleCase(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function getQueryParams(e){e=e.split("+").join(" ");for(var t,n={},i=/[?&]?([^=]+)=([^&]*)/g;t=i.exec(e);)n[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return n}function displayBanner(e){var t='<div class="ns-box ns-bar ns-effect-slidetop ns-type-notice ns-show"><div class="ns-box-inner"><span class="megaphone"></span><span class="title"><a href="#">'+e.name+" - "+toTitleCase(e.status)+"</a></span><p>"+e.body+'</p></div><span class="ns-close"></span></div>';$(".alertbox").replaceWith(t),$(".ns-close").on("click",function(){$(".alertbox").remove()})}function identify_timezone(){$(tzField).hide();var e=moment.tz.guess(),t={"-11:00":"tz_international_date_line_west","-10:00":"tz_hawaii","-08:00":"tz_alaska","-07:00":"tz_pacific_time","-06:00":"tz_mountain_time","-05:00":"tz_central_time","-04:00":"tz_eastern_time","-03:00":"tz_atlantic_time","-02:00":"tz_greenland","-01:00":"tz_cape_verde","-00:00":"tz_utc","+01:00":"tz_london","+02:00":"tz_berlin","+03:00":"tz_baghdad","+04:00":"tz_abu_Dhabi","+05:00":"tz_karachi","+06:00":"tz_almaty","+07:00":"tz_bangkok","+08:00":"tz_hong_kong","+09:00":"tz_tokyo","+10:00":"tz_sydney","+11:00":"tz_solomon_is","+12:00":"tz_auckland","+13:00":"tz_samoa"}[moment.tz(e).format("Z")];tzField=tzField.replace(".","#"),$(tzField).val(t)}function parseMarkdown(){try{if($(".article__body")&&$(".article__body").html()&&$(".article__body").html().match(/^\s*<pre>-/i)){const i={code:"mkdnCode"},a=Object.keys(i).map(e=>({type:"output",regex:new RegExp(`<${e}(.*)>`,"g"),replace:`<${e} class="${i[e]}" $1>`}));console.log("article__body found");var e=new showdown.Converter({extensions:[...a]}),t=$(".article__body").html().replace(/<pre>-/gi,"").replace(/<\/pre>/gi,""),n=e.makeHtml(t);$(".article__body").html(n)}}catch(e){console.error("showdown exc",e)}}$(window).load(function(){$(conversionField).hide(),parseMarkdown(),identify_timezone(),setEditBtnLink(),$("a.submit-a-request, .article-more-questions a").on("click",function(e){var t=window.location.pathname;ga("send","event","Submit Request","Submit Request From",t)}),$("#new_request").on("click",".searchbox-suggestions a",function(e){var t=$(this).attr("href");ga("send","event","Ticket Deflection","Deflect",t)})}),$(document).ready(function(){manual_incident.name&&displayBanner(manual_incident),new StatusPage.page({page:statusPageID}).incidents({filter:"unresolved",success:function(e){Array.isArray(e.incidents)||e.incidents.length||(incident.name=e.incidents[0].name,incident.status=e.incidents[0].status,incident.body=e.incidents[0].incident_updates[0].body,displayBanner(incident))}})}),function e(t,n,i){function a(o,r){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!r&&c)return c(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){return a(t[o][1][e]||e)},d,d.exports,e,t,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(e,t,n){"use strict";hljs.initHighlightingOnLoad();var i="is-active",a="is-hidden",s="topbar--hidden",o="topbar--fixed";$(function(){var e=$(window),t=$("[data-topbar]"),n=parseInt(t.height());e.on("scroll.theme",function(){var i=e.scrollTop();i>n&&i<2*n?t.addClass(s):t.removeClass(s).removeClass(o),i>2*n&&t.removeClass(s).addClass(o)}),0===$('[data-hero-unit="large"]').length&&$("[data-menu]").children("[data-toggle-search]").removeClass("hidden");var r=$("[data-search-mobile]"),c=$("<button />",{class:"btn btn--default btn--search-topbar-close","data-toggle-search":"true",html:$("<span />",{class:"fa fa-close"})});function l(){window.location.search=$.param({query:$("#quick-search").val(),status:$("#request-status-select").val(),organization_id:$("#request-organization-select").val()})}r.find(".search-box").append(c),$(document).on("click","[data-toggle-menu]",function(){$(this).toggleClass("tcon-transform"),$("[data-menu]").toggle(),t.toggleClass("topbar--opened")}),$(document).on("click","[data-toggle-search]",function(){r.toggleClass("search-box--mobile-active")}),$(".share a").click(function(e){e.preventDefault(),window.open(this.href,"","height = 500, width = 500")}),$(".share-label").on("click",function(e){e.stopPropagation();var t="true"==this.getAttribute("aria-selected");this.setAttribute("aria-selected",!t),$(".share-label").not(this).attr("aria-selected","false")}),$(document).on("click",function(){$(".share-label").attr("aria-selected","false")}),$("#request-status-select, #request-organization-select").on("change",function(){l()}),$("#quick-search").on("keypress",function(e){13===e.which&&l()}),$(".image-with-lightbox").magnificPopup({type:"image",closeOnContentClick:!0,closeBtnInside:!1,fixedContentPos:!0,mainClass:"mfp-with-zoom",image:{verticalFit:!0},zoom:{enabled:!0,duration:300}}),$(".image-with-video-icon").magnificPopup({disableOn:700,type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,fixedContentPos:!1}),$(".accordion__item-title").on("click",function(){var e=$(this);e.toggleClass("accordion__item-title--active"),e.parents(".accordion__item").find(".accordion__item-content").slideToggle()}),$(".tabs-link").click(function(e){e.preventDefault();var t=$(this),n=t.index(),s=t.parents(".tabs").find(".tab").eq(n);t.addClass(i).siblings().removeClass(i),s.removeClass(a).siblings(".tab").addClass(a)}),$(".fa-spin").empty(),$("[data-asynchtml-resource]").removeAttr("data-asynchtml-resource"),$("img.custom-block__image").each(function(){var e=$(this),t=e.attr("id"),n=e.attr("class"),i=e.attr("src")+"?reset";$.get(i,function(i){var a=$(i).find("svg");void 0!==t&&(a=a.attr("id",t)),void 0!==n&&(a=a.attr("class",n+" replaced-svg")),a=a.removeAttr("xmlns:a"),e.replaceWith(a)},"xml")})})},{}]},{},[1]),document.addEventListener("DOMContentLoaded",function(){function e(e,t){this.toggle=e,this.menu=t,this.menuPlacement={top:t.classList.contains("dropdown-menu-top"),end:t.classList.contains("dropdown-menu-end")},this.toggle.addEventListener("click",this.clickHandler.bind(this)),this.toggle.addEventListener("keydown",this.toggleKeyHandler.bind(this)),this.menu.addEventListener("keydown",this.menuKeyHandler.bind(this))}e.prototype={get isExpanded(){return"true"===this.menu.getAttribute("aria-expanded")},get menuItems(){return Array.prototype.slice.call(this.menu.querySelectorAll("[role='menuitem']"))},dismiss:function(){this.isExpanded&&(this.menu.setAttribute("aria-expanded",!1),this.menu.classList.remove("dropdown-menu-end","dropdown-menu-top"))},open:function(){this.isExpanded||(this.menu.setAttribute("aria-expanded",!0),this.handleOverflow())},handleOverflow:function(){var e=this.menu.getBoundingClientRect(),t=e.left<0||e.left+e.width>window.innerWidth,n=e.top<0||e.top+e.height>window.innerHeight;(t||this.menuPlacement.end)&&this.menu.classList.add("dropdown-menu-end"),(n||this.menuPlacement.top)&&this.menu.classList.add("dropdown-menu-top"),this.menu.getBoundingClientRect().top<0&&this.menu.classList.remove("dropdown-menu-top")},focusNextMenuItem:function(e){if(this.menuItems.length){var t=this.menuItems.indexOf(e),n=t===this.menuItems.length-1||t<0?0:t+1;this.menuItems[n].focus()}},focusPreviousMenuItem:function(e){if(this.menuItems.length){var t=this.menuItems.indexOf(e),n=t<=0?this.menuItems.length-1:t-1;this.menuItems[n].focus()}},clickHandler:function(){this.isExpanded?this.dismiss():this.open()},toggleKeyHandler:function(e){switch(e.keyCode){case 13:case 32:case 40:e.preventDefault(),this.open(),this.focusNextMenuItem();break;case 38:e.preventDefault(),this.open(),this.focusPreviousMenuItem();break;case 27:this.dismiss(),this.toggle.focus()}},menuKeyHandler:function(e){var t=this.menuItems[0],n=this.menuItems[this.menuItems.length-1],i=e.target;switch(e.keyCode){case 27:this.dismiss(),this.toggle.focus();break;case 40:e.preventDefault(),this.focusNextMenuItem(i);break;case 38:e.preventDefault(),this.focusPreviousMenuItem(i);break;case 9:e.shiftKey?i===t?this.dismiss():(e.preventDefault(),this.focusPreviousMenuItem(i)):i===n?this.dismiss():(e.preventDefault(),this.focusNextMenuItem(i));break;case 13:case 32:e.preventDefault(),i.click()}}};var t=[];Array.prototype.slice.call(document.querySelectorAll(".dropdown-toggle")).forEach(function(n){var i=n.nextElementSibling;i&&i.classList.contains("dropdown-menu")&&t.push(new e(n,i))}),document.addEventListener("click",function(e){t.forEach(function(t){t.toggle.contains(e.target)||t.dismiss()})})}),jQuery(function(e){var t,n,i=/^ticket\_fields\_(\d+)$/,a=getQueryParams(document.location.search);for(t in a)a.hasOwnProperty(t)&&(n=t.match(i))&&e("#request_custom_fields_"+n[1]).val(a[t])});
